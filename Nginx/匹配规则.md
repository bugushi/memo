# 匹配指令
`=` 绝对匹配
`^~` 前缀匹配
`~` 正则匹配，区分大小写
`~*` 正则匹配，不区分大小写

# 匹配规则
TL;DR
1、如果`=`规则命中，使用该规则，停止后续查找
2、如果正则规则命中，使用第一个命中的正则规则，停止后续查找
3、使用

1. nginx first checks locations defined using the prefix strings (prefix locations). Among them, the location with the longest matching prefix is selected and remembered. 

2.Then regular expressions are checked, in the order of their appearance in the configuration file. The search of regular expressions terminates on the first match, and the corresponding configuration is used.

3.If no match with a regular expression is found then the configuration of the prefix location remembered earlier is used.


From the [HTTP core module docs:](https://nginx.org/en/docs/http/ngx_http_core_module.html#location)

1、Directives with the "=" prefix that match the query exactly. If found, searching stops.

2、All remaining directives with conventional strings. If this match used the "^~" prefix, searching stops.

3、Regular expressions, in the order they are defined in the configuration file.

4、If #3 yielded a match, that result is used. Otherwise, the match from #2 is used.

Example from the documentation:
```nginx
location  = / {
  # matches the query / only.
  [ configuration A ] 
}
location  / {
  # matches any query, since all queries begin with /, but regular
  # expressions and any longer conventional blocks will be
  # matched first.
  [ configuration B ] 
}
location /documents/ {
  # matches any query beginning with /documents/ and continues searching,
  # so regular expressions will be checked. This will be matched only if
  # regular expressions don't find a match.
  [ configuration C ] 
}
location ^~ /images/ {
  # matches any query beginning with /images/ and halts searching,
  # so regular expressions will not be checked.
  [ configuration D ] 
}
location ~* \.(gif|jpg|jpeg)$ {
  # matches any request ending in gif, jpg, or jpeg. However, all
  # requests to the /images/ directory will be handled by
  # Configuration D.   
  [ configuration E ] 
}
```
If it's still confusing, here's a [longer explanation.](http://nginx.org/en/docs/http/ngx_http_core_module.html#location)
